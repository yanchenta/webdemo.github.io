<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0, maximum-scale=1.0" />
	<meta charset="utf-8"/>
	<title>高尔夫</title>
	<link rel="stylesheet" type="text/css" href="css/index.css"/>
	<style type="text/css">
		html body{
			background-image:url('images/mainBackImage2.png');
		}
		.mainBody{
			background-color:transparent;
			max-height:836px;
			text-align:center;
			font-size:20px;
		}
		
		.footer{
			background-image:url('images/m4-bottom.png');
		}
		
		.inputs-area{
			background-image:url('images/m4-rect-backimg.png');
			background-position:center;
			background-size:600px 402px;
			opacity:1;
			background-repeat:no-repeat;
			width:600px;
			height:402px;
			
			margin-left:auto;
			margin-right:auto;
			text-align: left;
			padding-top:50px;

		}
		.buttons-area{
			background-color:white;
			background-image:url('images/m4-submit.png');
			height:65px;
			width:166px;
			
			position:absolute;
			bottom:200px;
			left:50%;
			margin-left:-83px;
		}
		input{
			font-size:20px;
		}
		
		.provinces-text{
			width:150px;
			height:40px;
		}
		.cities-text{
			width:150px;
			height:40px;
		}
		.providers-text{
			width:374px;
			height:40px;
		}
		<!--
		.provinces{
			top:105px;
			left:198px;
			height:100px;
			width:140px;
			background-color:#aaaaaa;
			
			position:absolute;
			overflow-y:scroll;
			z-index:20000;
		}
		.cities{
			top:105px;
			left:410px;
			height:100px;
			width:140px;
			background-color:#aaaaaa;
			
			position:absolute;
			overflow-y:scroll;
			z-index:20000;
		}
		.providers{
			top:160px;
			left:198px;
			height:100px;
			width:350px;
			background-color:#aaaaaa;
			text-align:left;
			position:absolute;
			overflow-y:scroll;
			overflow-x:hidden;
			z-index:10000;
		}-->
		
		.phone-text{
			width:100%;
			height:40px;
		}
		
		.phone-text-prefix-div{
			display:inline-block;
			width:140px;
			text-align:right;
			vertical-align:top;
			margin-top:3px;
		}
		.phone-text-prefix-prefix-div{
			margin-right:-26px;
			letter-spacing:25px;
			color:white;
			width:140px;
			height:30px;
			display:inline-block;
			padding-top:12px;
		}
		
		.friend-name-text-prefix-div{
			width:140px;
			display:inline-block;
			text-align:right;
		}
		.friend-name-text-prefix-prefix-div{
			margin-right:-6px;
			letter-spacing:5px;
			color:white;
			width:130px;
			height:30px;
			display:inline-block;
		}
		
		.real-name-text-prefix-div{
			width:140px;
			display:inline-block;
			text-align:right;
		}
		.real-name-text-prefix-prefix-div{
			margin-right:-26px;
			letter-spacing:25px;
			color:white;
			width:140px;
			height:30px;
			display:inline-block;
		}
		
		.providers-text-prefix-div{
			width:140px;
			display:inline-block;
			text-align:right;
		}
		.providers-text-prefix-prefix-div{
			margin-right:-23px;
			letter-spacing:19px;
			color:white;
			width:140px;
			height:30px;
			display:inline-block;
		}
		
		.row-margin-top{
			margin-top:10px;
		}
		.friendname-text{
			width:350px;
			height:40px;
		}
		.phone-text{
			width:350px;
			height:40px;
		}
		
	</style>
</head>
<body>
	<div class="banner"></div>
	<div class="mainBody">
		<div class="inputs-area">
			<div class="row-margin-top">
				<div style="width:140px;display:inline-block;text-align:right;">
					<span style="color:white; ">您所在的省:</span>
				</div>
				<div style="display:inline-block;">
					<!--<input class="provinces-text" type="text" style="width:137px;height:40px;"/>-->
					<select class="provinces-text" style="height:50px;"></select>
					<div style="width:64px;display:inline-block;text-align:right;">
						<span style="color:white;">城市:</span>
					</div>
					<!--<input class="cities-text" type="text" style="width:137px;height:40px;"/>-->
					<select class="cities-text" style="height:50px;"></select>
				</div>
			</div>
			<div class="row-margin-top">
				<div class="providers-text-prefix-div">
					<div class="providers-text-prefix-prefix-div">经销商</div>
					<span style="color:white;">:</span>
				</div>
				<div style="display:inline-block;width:350px;">
					<!--<input class="providers-text" type="text" style="width:100%;height:40px;"/>-->
					<select class="providers-text" style="height:50px;"></select>
				</div>
			</div>
			<div class="row-margin-top">
				<div class="real-name-text-prefix-div">
					<div class="real-name-text-prefix-prefix-div">姓&nbsp;名</div>
					<span style="color:white;">:</span>
				</div>
				<input class="realname-text" type="text" style="width:350px;height:40px;"/>
			</div>
			<div class="row-margin-top">
				<div class="phone-text-prefix-div">
					<div class="phone-text-prefix-prefix-div">电&nbsp;话</div>
					<span style="color:white;">:</span>
				</div>
				<div style="display:inline-block;width:350px;">
					<div>
						<input class="phone-text" type="text"/>
					</div>
					<div style="margin-top:10px;color:white;">
						<span>(以上均为必填项)</span>
					</div>
				</div>
			</div>
			<div class="row-margin-top">
				<div class="friend-name-text-prefix-div">
					<div class="friend-name-text-prefix-prefix-div">好友姓名</div>
					<span style="color:white;">:</span>
				</div>
				<input class="friendname-text" type="text"/>
			</div>
		</div>
		<!--hide area1-->
		<!--<div class="provinces" style="display:none">
		</div>-->
		<!--hide area2-->
		<!--<div class="cities" style="display:none">
		</div>-->
		<!--hide area3-->
		<!--<div class="providers"  style="display:none">
		</div>-->
		<div class="buttons-area">
		</div>
	</div>
	<div class="footer">
		<div class="bottom-btn"><a href="index.html"></a></div>
		<div id="see-acti-intro-menu" class="bottom-btn"><a href="m2.html"></a></div>
		<div id="friend-num-menu" class="bottom-btn"><a href="m3-1.html"></a></div>
		<div class="bottom-btn"><a href="m4.html"></a></div>
	</div>
</body>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/ajaxes.js"></script>
<script type="text/javascript" src="js/json.js"></script>
<script type="text/javascript" src="js/trackEvent.js"></script>
<script type="text/javascript" src="js/trackConsts.js"></script>

<script type="text/javascript">

	function loadProviders(cId, cName){
		var providersSelect = $(".providers-text")[0];
		for(var i = providersSelect.options.length - 1; i >= 0; i--)
		{
			providersSelect.options.remove(i);
		}
		var _providers = null;
		var isGetIt = false;
		for(var i = 0; i < dicCodes.length; i++)
		{
			for(var j = 0; j < dicCodes[i].Cities.length; j++)
			{
				if(cName == dicCodes[i].Cities[j].cName){
					_providers = dicCodes[i].Cities[j].Dealers;
					isGetIt = true;
					break;
				}
			}
			if(isGetIt) break;
		}
		
		for(var i = 0; i < _providers.length; i++)
		{
			var elem_prov = document.createElement("option");
			elem_prov.value = _providers[i].dCode + "," + _providers[i].dName;
			elem_prov.text = _providers[i].dName;
			providersSelect.options.add(elem_prov);
			
		}
		
	}

	function loadCities(pid,pName){
		
		var citiesSelect = $(".cities-text")[0];
		
		for(var i = citiesSelect.options.length - 1; i >= 0; i--)
		{
			citiesSelect.options.remove(i);
		}
		var cities = null;
		for(var i = 0; i < dicCodes.length; i++)
		{
			if(pName == dicCodes[i].pName)
			{
				cities = dicCodes[i].Cities;
				break;
			}
		}
		
		for(var i = 0; i < cities.length; i++)
		{
			var elem_city = document.createElement("option");
			elem_city.value = cities[i].cId + "," + cities[i].cName;
			elem_city.text = cities[i].cName;
			citiesSelect.options.add(elem_city);
		}
		citiesSelect.onchange = function(){
			var cityInfo = this.value.split(',');
			loadProviders(cityInfo[0], cityInfo[1]);
		}
	}
	
	//地址单选列表(级联)
	function loadProvinces()
	{
		var provincesSelect = $(".provinces-text")[0];
		for(var i = 0; i < dicCodes.length; i++)
		{
			var elem_pro = document.createElement("option");
			elem_pro.value = dicCodes[i].pId + "," + dicCodes[i].pName;
			elem_pro.text = dicCodes[i].pName;
			elem_pro.style.height = "30px";
			provincesSelect.options.add(elem_pro);
		}
		provincesSelect.onchange = function(){
			var proInfo = this.value.split(',');
			loadCities(proInfo[0], proInfo[1]);
			window.setTimeout(function(){
				document.getElementsByClassName("cities-text")[0].onchange();
			}, 500);
		}
		
		if(document.getElementsByClassName("provinces-text")[0].options.length > 0){
			document.getElementsByClassName("provinces-text")[0].value = document.getElementsByClassName("provinces-text")[0].options[0].value;
			document.getElementsByClassName("provinces-text")[0].onchange();
		}
	}
	
function initWindow(){
	//省份
	var pros = document.getElementsByClassName("provinces")[0];
	//城市
	var cits = document.getElementsByClassName("cities")[0];
	//省份
	var provs = document.getElementsByClassName("providers")[0];
	
	document.getElementsByClassName("buttons-area")[0].onclick = function(){
		//provinces-text
		var proInfo = document.getElementsByClassName("provinces-text")[0].value.split(',');
		var pId = null;
		var pName = null;
		if(2 == proInfo.length){
			pId = proInfo[0];
			pName = proInfo[1];
		}
		
		//cities-text
		var citiesInfo = document.getElementsByClassName("cities-text")[0].value.split(',');
		var cId = null;
		var cName = null;
		if(2 == citiesInfo.length){
			cId = citiesInfo[0];
			cName = citiesInfo[1];
		}
		
		//providers-text
		var providersInfo = document.getElementsByClassName("providers-text")[0].value.split(',');
		var dId = null;
		var dName = null;
		if(2 == providersInfo.length){
			dId = providersInfo[0];
			dName = providersInfo[1];
		}
		
		//realname-text
		var realname_text = document.getElementsByClassName("realname-text")[0].value;
		//phone-text
		var phone_text = document.getElementsByClassName("phone-text")[0].value;
		//friendname-text
		var friendname_text = document.getElementsByClassName("friendname-text")[0].value;
		
		if(null == pName || "" == pName){
			alert("省份不能为空！");
			return;
		}
		if(null == cName || "" == cName){
			alert("城市不能为空！");
			return;
		}
		if(null == dName || "" == dName){
			alert("经销商不能为空！");
			return;
		}
		var name = $.trim(realname_text), reg_ch = /[^\u4e00-\u9fa5]/,reg_en = /^[a-zA-Z]+$/;
		if (!name) {
			alert("请输入您的姓名！");
			return;
		} else if (reg_ch.test(name)&&!reg_en.test(name)) {
			alert("请输入中文姓名或英文姓名！");
			return;
		}
				
				
		var tel = $.trim(phone_text), reg = /^(13[0-9]|14[0-9]|15[0-9]|18[0-9])\d{8}$$/;
		if (!tel || !reg.test(tel)) {
			alert("请输入正确的手机号码...");
			return;
		}
		
		/*
		if(null == realname_text || "" == realname_text){
			alert("姓名不能为空！");
			return;
		}
		if(null == phone_text || "" == phone_text){
			alert("电话不能为空！");
			return;
		}*/
		//var url = "http://test.zhangkuo.net/advmessage/adv/addResultJsonP.action?"
		var url = "http://track.mobile1.com.cn/advmessage/adv/addResultJsonP.action?"
		var paramStr = "advid=10052";
		//realname
		paramStr += "&realname=" + realname_text;
		//mobile
		paramStr += "&mobile=" + phone_text;
		//pid:
		paramStr += "&provinceid=" + pId;
		//provincename
		paramStr += "&provincename=" + pName;
		//cid:
		paramStr += "&cityid=" + cId;
		//cityname
		paramStr += "&cityname=" + cName;
		//expand1=>friendname
		paramStr += "&expand1=" + friendname_text;
		//did:
		paramStr += "&expand2=" + dId;
		//dealerName
		paramStr += "&expand3=" + dName;
		
		url += paramStr;
		
		ajax(url, function(response){
			if(!!response && !!response.length && response.length > 0){
				if(1 === response[0].success){
					alert("提交成功！");
					document.getElementsByClassName("provinces-text")[0].value = null;
					document.getElementsByClassName("cities-text")[0].value = null;
					document.getElementsByClassName("providers-text")[0].value = null;
					document.getElementsByClassName("realname-text")[0].value = "";
					document.getElementsByClassName("phone-text")[0].value = "";
					document.getElementsByClassName("friendname-text")[0].value = "";
				}
				else{
					alert(response[0].info);
				}
			}
			
		});
	};
	}

	initWindow();
	loadProvinces();
	

	$("#see-acti-intro-menu").click(function(){
		track2(channelCodes.channel_id, channelCodes.track_codes.see_acti_intro_click);
		window.location.href = "m2.html";
	});
	$("#friend-num-menu").click(function(){
		track2(channelCodes.channel_id, channelCodes.track_codes.friend_num_click);
		window.location.href = "m3-1.html";
	});
	
	$(".buttons-area").click(function(){
		track2(channelCodes.channel_id, channelCodes.track_codes.date_drive_submit);
	});
	//alert(1);
</script>
</html>