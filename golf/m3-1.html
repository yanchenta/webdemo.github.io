<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0, maximum-scale=1.0" />
	<meta charset="utf-8"/>
	<title>高尔夫</title>
	<link rel="stylesheet" type="text/css" href="css/index.css"/>
	<style type="text/css">
		html body{
			background-image:url('images/mainBackImage2.png');
		}
		.mainBody{
			background-color:transparent;
			max-height:746px;
			text-align:center;
			font-size:20px;
			position:relative;
			
			overflow-y:scroll;
		}
		.footer{
			background-image:url('images/m3-bottom.png');
		}
		.title{
			text-align:center;
			font-size:35px;
			font-weight:700;
			margin-top:40px;
		}
		.prefix-text{
			font-size:20px;
			font-weight:700;
			width:440px;
			margin-top:30px;
			margin-left:100px;
			text-align:left;
		}
		.input-name{
			vertical-align:top;
			margin-top:30px;
		}
		.input-name span{
			font-size:30px;
			font-weight:700;
		}
		
		.input-name-text{
			height:35px;
			width:225px;
			font-size:30px;
		}
		.input-sex{
			vertical-align:top;
			margin-top:30px;
			height:35px;
		}
		
		.test{
			font-size:18px;
			font-family:"黑体";
			width:440px;
			margin-top:30px;
			margin-left:100px;
			text-align:left;
		}
		
		.subtitle{
			font-size:18px;
			font-weight:700;
			width:440px;
		}
		.test-area{
			margin-top:20px;
			margin-bottom:20px;
		}
		
		.sex_unselected{
			width:30px;
			height:30px;
			display:inline-block;
			background-image:url('images/unselected.png');
		}
		.sex_selected{
			width:30px;
			height:30px;
			display:inline-block;
			background-image:url('images/selected.png');
		}
		.unselected{
			width:30px;
			height:30px;
			display:inline-block;
			background-image:url('images/unselected.png');
		}
		.selected{
			width:30px;
			height:30px;
			display:inline-block;
			background-image:url('images/selected.png');
		}
		.submit{
			background-image:url('images/m4-submit.png');
			height:65px;
			width:166px;
			
			margin-top:40px;
			margin-left:237px;
			margin-bottom:40px;
			
			cursor:pointer;
		}
	</style>
</head>
<body>
	<div class="banner"></div>
	<div class="title">
		<span>测测你好友的靠谱指数</span>
	</div>
	<div class="mainBody">
		<div class="input-name">
				<span>好友姓名：</span>
				<input type="text" class="input-name-text"/>
		</div>
		<div class="input-sex">
			<div style="display:inline-block;margin-left:50px;">
				<div id="sex_male" class="sex_unselected" tagques="sex" tagvalue="男"></div>
				<span>男</span>
			</div>
			
			<div  style="display:inline-block;margin-left:100px;">
				<div id="sex_female" class="sex_unselected" tagques="sex" tagvalue="女"></div>
				<span>女</span>
			</div>
			
			<!--<input name="radiobox-sex" type="radio" value="">男</input>
			<input name="radiobox-sex" type="radio" value="">女</input>-->
		</div>
		<div class="prefix-text">谁是像全新高尔夫一样品质如一的靠谱好友？一起来找答案吧！
		</div>
		<div class="test-area">
			<div class="test">
				<div class="subtitle">
					<span>1.&nbsp;一大群人聚会，你的朋友属于哪种状态？</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="10" tagvalue="71"></div>
					<span>A.&nbsp;&nbsp;前后张罗，照顾大家；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="10" tagvalue="72"></div>
					<span>B.&nbsp;&nbsp;跟其中几个人聊天；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="10" tagvalue="73"></div>
					<span>C.&nbsp;&nbsp;狂喝不止，烂醉如泥；</span>
				</div>
			</div>
			<div class="test">
				<div class="subtitle">
					<span>2.&nbsp;你在工作中被穿小鞋，向朋友诉苦，TA的反应是：
					</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="11" tagvalue="74"></div>
					<span>A.&nbsp;&nbsp;跟你一起大骂“黑心同事”；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="11" tagvalue="75"></div>
					<span>B.&nbsp;&nbsp;劝你想开点，工作中难免遇到烦心事；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="11" tagvalue="76"></div>
					<span>C.&nbsp;&nbsp;什么都不说，陪你吃喝玩乐散心；</span>
				</div>
			</div>
			<div class="test">
				<div class="subtitle">
					<span>3.&nbsp;你在朋友圈发布“刚刚不小心摔了个嘴啃泥”，TA的回复是：</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="12" tagvalue="77"></div>
					<span>A.&nbsp;&nbsp;走路小心点，没伤着吧？</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="12" tagvalue="78"></div>
					<span>B.&nbsp;&nbsp;啥也不说，点赞；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="12" tagvalue="79"></div>
					<span>C.&nbsp;&nbsp;竟然错过精彩瞬间！</span>
				</div>
			</div>
			<div class="test">
				<div class="subtitle">
					<span>4.&nbsp;你对TA说你最近打算健身减肥，TA会回答：</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="13" tagvalue="80"></div>
					<span>A.&nbsp;&nbsp;走，搓一顿先，毕竟吃饱才有力气健身；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="13" tagvalue="81"></div>
					<span>B.&nbsp;&nbsp;不用减，你这样挺好的；
					</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="13" tagvalue="82"></div>
					<span>C.&nbsp;&nbsp;加油！你会瘦成一道闪电！</span>
				</div>
			</div>
			<div class="test">
				<div class="subtitle">
					<span>5.&nbsp;和朋友开车出去玩，遇到“马路杀手”，TA的表现是：</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="14" tagvalue="83"></div>
					<span>A.&nbsp;&nbsp;难以抑制怒火，破口大骂；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="14" tagvalue="84"></div>
					<span>B.&nbsp;&nbsp;面露愠色，但不会说什么；</span>
				</div>
				<div class="choice">
					<div class="unselected" tagques="14" tagvalue="85"></div>
					<span>C.&nbsp;&nbsp;没什么反应，集中注意力开车；
					</span>
				</div>
			</div>
		</div>
		<div class="submit"></div>
	</div>
	<div class="footer">
		<div class="bottom-btn"><a href="index.html"></a></div>
		<div id="see-acti-intro-menu" class="bottom-btn"></div>
		<div id="friend-num-menu" class="bottom-btn"></div>
		<div class="bottom-btn"><a href="m4.html"></a></div>
	</div>
</body>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/ajaxes.js"></script>
<script type="text/javascript" src="js/trackEvent.js"></script>
<script type="text/javascript" src="js/trackConsts.js"></script>

<script type="text/javascript">
	var dataforsubmit = {
		name: null,
		sex: null,
		questions: [{
				id:10,
				ans:-1
			},{
				id:11,
				ans:-1
			},{
				id:12,
				ans:-1
			},{
				id:13,
				ans:-1
			},{
				id:14,
				ans:-1
			}]
	};
	
	function selectChoice(choice){
		var quesid = choice.getAttribute("tagques");
		var choicevalue = choice.getAttribute("tagvalue");
		var uncheckboxes = document.getElementsByClassName("unselected");
		var checkboxes = document.getElementsByClassName("selected");
		//alert("unselected:" + checkboxes.length + "; selected:" + tmp.length);
		var allboxes = [];
		for(var i = 0; i < uncheckboxes.length; i++)
		{
			allboxes.push(uncheckboxes[i]);
		}
		for(var i = 0; i < checkboxes.length; i++)
		{
			allboxes.push(checkboxes[i]);
		}
		
		//update ui:
		for(var i = 0; i < allboxes.length; i++){
			if(quesid == allboxes[i].getAttribute("tagques")){
				//alert(choicevalue + "," + checkboxes[i].tagvalue);
				if(choicevalue == allboxes[i].getAttribute("tagvalue")){
					allboxes[i].isSelected = true;
					allboxes[i].className = "selected";
					//alert("selected");
				}
				else {
					allboxes[i].isSelected = false;
					allboxes[i].className = "unselected";
					//alert("selected");
				}
			}
		}
		
		//update data:
		for(var i = 0; i < dataforsubmit.questions.length; i++){
			if(dataforsubmit.questions[i].id == quesid){
				dataforsubmit.questions[i].ans = choicevalue;
			}
		}
	};
	
	function addSelectEvent(){
		var unsel_checkboxes = document.getElementsByClassName("unselected");
		for(var i = 0; i < unsel_checkboxes.length; i++){
			unsel_checkboxes[i].onclick = function() {
				selectChoice(this);
			}
		}
		
		var sel_checkboxes = document.getElementsByClassName("unselected");
		for(var i = 0; i < sel_checkboxes.length; i++){
			sel_checkboxes[i].onclick = function() {
				selectChoice(this);
			}
		}
	};
	
	addSelectEvent();
	
	var isMale = false;
	var isFemale = false;
	document.getElementById("sex_male").onclick = function(){
		document.getElementById("sex_male").className = "sex_selected";
		document.getElementById("sex_female").className = "sex_unselected";
		isMale = true;
		isFemale = false;
	}
	document.getElementById("sex_female").onclick = function(){
		document.getElementById("sex_male").className = "sex_unselected";
		document.getElementById("sex_female").className = "sex_selected";
		isMale = false;
		isFemale = true;
	}
	
	document.getElementsByClassName("submit")[0].onclick = function(){
		var url = "http://track.mobile1.com.cn/advmessage/qnnaire/commit.action";
		//alert("提交数据");
		var paramStr = "?qnnaireid=4&commitinfo=";
		for(var i = 0; i < dataforsubmit.questions.length; i++)
		{
			if(-1 == dataforsubmit.questions[i].ans) {
				window.location.href = "#";
				//alert(dataforsubmit.questions[i].id + ":" + dataforsubmit.questions[i].ans)
				alert("必须回答完所有题目才能提交！");
				return;
			}
			
			paramStr +=  dataforsubmit.questions[i].id + ":" + dataforsubmit.questions[i].ans + "|"
		}
		paramStr = paramStr.substr(0, paramStr.length - 1);
		var name = document.getElementsByClassName("input-name-text")[0].value;
		//alert(paramStr);
		if(null == name || "" == name)
		{
			alert("姓名不能为空！");
			return;
		}
		paramStr += "&realname=" + document.getElementsByClassName("input-name-text")[0].value;

		if(isMale){
			paramStr += "&sex=男";
		}
		else if(isFemale){
			paramStr += "&sex=女";
		}
		else{
			window.location.href = "#";
			alert("请选择性别！");
			return;
		}
		url += paramStr;
		ajax(url, function(response){
			if(!!response){
				if(1 === response.success){
					var rlt = JsonToStr(response);//"{\"score\":55,\"success\":1,\"info\":\"成功\"}";
					window.location.href= "m3-2.html?rlt=" + rlt;
				}
				else{
					alert(response.info);
				}
			}
		});
	};
	
	
	//监控
	var window_load = window.onload;
	window.onload =  function(){
		if(!!window_load) window_load();
		track2(channelCodes.channel_id, channelCodes.track_codes.friend_num_pv);
	}
	
	$("#see-acti-intro-menu").click(function(){
		track2(channelCodes.channel_id, channelCodes.track_codes.see_acti_intro_click);
		window.location.href = "m2.html";
	});
	$("#friend-num-menu").click(function(){
		track2(channelCodes.channel_id, channelCodes.track_codes.friend_num_click);
		window.location.href = "m3-1.html";
	});
	
	var submit_click = $(".submit").onclick;
	$(".submit").click(function(){
		if(!!submit_click) submit_click();
		track2(channelCodes.channel_id, channelCodes.track_codes.friend_num_submit_pv);
	});
</script>
</html>