<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0, maximum-scale=1.0" />
	<title></title>
	<style type="text/css">
		html body{
			width:640px;
			height:2744px;
			padding:0px 0px;
			margin:0px 0px;
			
			background-image:url('images/baiming-bg.jpg');
			background-size:640px 2744px;
			background-position:left top;
			background-repeat:no-repeat;
		}
		
		.div-controls{
			position:absolute;
			top:0px;
			left:0px;
			
			width:640px;
			height:2800px;
		}
		
		.div-anouce-top{
			position:absolute;
			top:0px;
			left:0px;
			
			width:640px;
			height:1802px;
			
			background-image:url('images/registration-top.png');
			background-size:640px 1802px;
			background-position:left top;
			background-repeat:no-repeat;
			
			display:none;
		}
		
		.div-to-index{
			position:absolute;
			top:437px;
			left:8px;
			
			width:205px;
			height:53px;
			
			cursor:pointer;
		}
		
		.text-xin{
			position:absolute;
			top:550px;
			left:110px;
			
			width:420px;
			height:30px;
			
			font-size:20px;
		}
		.text-ming{
			position:absolute;
			top:635px;
			left:110px;
			
			width:420px;
			height:30px;
			
			font-size:20px;
		}
		.select-sex{
			position:absolute;
			top:720px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.text-mail{
			position:absolute;
			top:815px;
			left:110px;
			
			width:420px;
			height:30px;
			
			font-size:20px;
		}
		.text-mobile{
			position:absolute;
			top:905px;
			left:110px;
			
			width:420px;
			height:30px;
			
			font-size:20px;
		}
		.select-cartype{
			position:absolute;
			top:990px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.select-whenbuy{
			position:absolute;
			top:1075px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.select-province{
			position:absolute;
			top:1165px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.select-city{
			position:absolute;
			top:1255px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.select-delear{
			position:absolute;
			top:1343px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		
		.select-licence{
			position:absolute;
			top:1435px;
			left:110px;
			
			width:445px;
			height:45px;
			
			font-size:20px;
		}
		.text-age{
			position:absolute;
			top:1520px;
			left:110px;
			
			width:420px;
			height:30px;
			
			font-size:20px;
		}
		.div-btn-submit{
			position:absolute;
			top:1576px;
			left:209px;
			
			width:200px;
			height:62px;
			
			cursor:pointer;
		}
		.cb-isread{
			position:absolute;
			top:1660px;
			left:110px;
			
			width:30px;
			height:30px;
		}
		.div-btn-openanouce{
			position:absolute;
			top:1660px;
			left:380px;
			
			width:80px;
			height:30px;
			
			cursor:pointer;
		}
		.div-btn-openanouce2{
			position:absolute;
			top:1703px;
			left:445px;
			
			width:90px;
			height:30px;
			
			cursor:pointer;
			
			display:none;
		}
		.div-btn-closeanouce{
			position:absolute;
			top:52px;
			right:30px;
			
			width:56px;
			height:56px;
			
			cursor:pointer;
		}

		.option-notice{
			color:grey;
		}
	</style>
</head>
<body>
	<div class="banner"></div>
	<div class="main-body">
		<div class="div-controls">
			<div class="div-to-index"></div>
			<input type="text" class="text-xin"/>
			<input type="text" class="text-ming"/>
			<select class="select-sex">
				<option class="option-notice" value="">请选择</option>
				<option value="male">先生</option>
				<option value="female">女士</option>
			</select>
			<!--<select type="text" class="select-birthdate">
				<option class="option-notice" value="">请选择</option>
				<option value="≤22">≤22</option>
				<option value=">22">>22</option>
			</select>-->
			<input type="text" class="text-mail"/>
			
			<input type="text" class="text-mobile"/>
			<select type="text" class="select-cartype">
				<option class="option-notice" value="">请选择</option>
				<option value="BMW 5系GT">BMW 5系GT</option>
				<option value="BMW 5系旅行轿车">BMW 5系旅行轿车</option>
				<option value="BMW 6系四门轿跑车">BMW 6系四门轿跑车</option>
				<option value="BMW 6系双门轿跑车">BMW 6系双门轿跑车</option>
				<option value="BMW 6系敞篷轿跑车">BMW 6系敞篷轿跑车</option>
				<option value="BMW 7系四门轿车">BMW 7系四门轿车</option>
				<option value="BMW X1">BMW X1</option>
				<option value="BMW X3">BMW X3</option>
				<option value="BMW X4">BMW X4</option>
				<option value="BMW X5">BMW X5</option>
				<option value="BMW X6">BMW X6</option>
				<option value="BMW Z4  敞篷跑车">BMW Z4  敞篷跑车</option>
				<option value="BMW M3双门轿跑车">BMW M3双门轿跑车</option>
				<option value="BMW M3敞篷轿跑车">BMW M3敞篷轿跑车</option>
				<option value="BMW M4双门轿跑车">BMW M4双门轿跑车</option>
				<option value="BMW M5四门轿车">BMW M5四门轿车</option>
				<option value="BMW M6四门轿跑车">BMW M6四门轿跑车</option>
				<option value="BMW M6双门轿跑车">BMW M6双门轿跑车</option>
				<option value="BMW X5 M">BMW X5 M</option>
				<option value="BMW X6 M">BMW X6 M</option>
				<option value="BMW i3">BMW i3</option>
				<option value="BMW i8">BMW i8</option>
				<option value="BMW高效混合动力车型">BMW高效混合动力车型</option>
			</select>
			<select type="text" class="select-whenbuy">
				<option class="option-notice" value="">请选择</option>
				<option value="3个月以内">3个月以内</option>
				<option value="3-6个月">3-6个月</option>
				<option value="6-12个月">6-12个月</option>
				<option value="12个月外">12个月外</option>
			</select>
			<select type="text" class="select-province">
				<option class="option-notice" value="">请选择</option>
				<option value="黑龙江">黑龙江</option>
				<option value="吉林">吉林</option>
				<option value="辽宁">辽宁</option>
			</select>
			<select type="text" class="select-city">
				<option class="option-notice" value="">请选择</option>
			</select>
			<select type="text" class="select-delear">
				<option class="option-notice" value="">请选择</option>
			</select>
			<select type="text" class="select-licence">
				<option class="option-notice" value="">请选择</option>
				<option value="有驾照">有驾照</option>
				<option value="无驾照">无驾照</option>
			</select>
			<input type="text" class="text-age"/>
			<input type="checkbox" class="cb-isread"/>
			<div class="div-btn-openanouce"></div>
			<div class="div-btn-openanouce2"></div>
			<div class="div-btn-submit"></div>
		</div>
		<div class="div-anouce-top">
			<div class="div-btn-closeanouce"></div>
		</div>
	</div>
	<div class="footer"></div>
</body>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/json.js"></script>

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/ajaxes.js"></script>

<script type="text/javascript" src="js/trackEvent.js"></script>
<script type="text/javascript" src="js/trackConsts.js"></script>

<script type="text/javascript">
	document.getElementsByClassName("div-to-index")[0].onclick = function(){
		window.location.href = "index.html";
	}
	document.getElementsByClassName("div-btn-submit")[0].onclick = function(){
		track2(window.codeConsts.channelId, window.codeConsts.codes.page_registration_submit);
		
		var text_xin = document.getElementsByClassName("text-xin")[0].value;
		var text_ming = document.getElementsByClassName("text-ming")[0].value;
		var select_sex = document.getElementsByClassName("select-sex")[0].value;
		var text_email = document.getElementsByClassName("text-mail")[0].value;
		var text_mobile = document.getElementsByClassName("text-mobile")[0].value;
		var select_cartype = document.getElementsByClassName("select-cartype")[0].value;
		var select_whenbuy = document.getElementsByClassName("select-whenbuy")[0].value;
		var select_province = document.getElementsByClassName("select-province")[0].value;
		var select_city = document.getElementsByClassName("select-city")[0].value;
		var select_delear = document.getElementsByClassName("select-delear")[0].value;
		var select_licence = document.getElementsByClassName("select-licence")[0].value;
		var text_age = document.getElementsByClassName("text-age")[0].value;
		
		var isChecked = document.getElementsByClassName("cb-isread")[0].checked;

		
		//姓名判断:
		if("" === text_xin){
			alert("请输入姓氏！");
			return;
		}
		else if(!text_xin.match(/^[a-z|A-Z|\u4e00-\u9fa5]{1,2}$/)){
			alert("请输入正确的姓氏！");
			return;
		}
		if("" === text_ming){
			alert("请输入名字！");
			return;
		}
		else if(!text_ming.match(/^[a-z|A-Z|\u4e00-\u9fa5]{1,8}$/)){
			alert("请输入正确的名字！");
			return;
		}
		var text_name = text_xin + "" + text_ming;
		
		
		//性别
		if("" === select_sex){
			alert("请选择性别！");
			return;
		}
		
		if("" === text_email){
			alert("请输入电子邮箱地址！");
		}
		if(!text_email.match(/^[0-9a-zA-Z_]{1,}@[0-9a-zA-Z_]{1,}\.[0-9a-zA-Z_]{1,}$/)){
			alert("邮箱格式不正确！");
			return;
		}
		
		//手机号码提示
		if(!text_mobile.match(/^[0-9]{11}$/)){
			alert('请输入 11位手机号码！');
			return;
		}
		
		//车系
		if("" === select_cartype){
			alert("请选择您感兴趣的车系！");
			return;
		}
		
		//新车
		if("" === select_whenbuy){
			alert("您打算何时购买新车！");
			return;
		}
		
		//省份
		if(null === select_province || "" === select_province){
			alert('请选择经销商所在的省份！');
			return;
		}
		
		//城市
		if(null === select_city || "" === select_city){
			alert('请选择经销商所在的城市！');
			return;
		}
		
		//经销商
		if(null === select_delear || "" === select_delear){
			alert('请选择经销商！');
			return;
		}
		
		//驾照
		if(null === select_licence || "" === select_licence){
			alert("请选择是否拥有驾照！");
			return;
		}
		
		if(null === text_age || "" === text_age){
			alert("请输入年龄！");
			return;
		}
		else{
			var i = parseInt(text_age);
			if(i < 1 || i > 200 || isNaN(i)){
				alert("年龄只能是1~200数字！");
				return;
			}
		}
		
		//确认接受声明
		if(!isChecked){
			alert("请确认阅读并接受了法律声明");
			return;
		}
		
		var advid = 30024;
		//var _url = "http://test.zhangkuo.net/advmessage/adv/addResultJsonP.action";
		var _url = "http://ama.adwo.com/advmessage/adv/addResultJsonP.action";
		
		var select_cartype = document.getElementsByClassName("select-cartype")[0].value;
		var select_whenbuy = document.getElementsByClassName("select-whenbuy")[0].value;
		var select_province = document.getElementsByClassName("select-province")[0].value;
		var select_city = document.getElementsByClassName("select-city")[0].value;
		var select_delear = document.getElementsByClassName("select-delear")[0].value;
		var select_licence = document.getElementsByClassName("select-licence")[0].value;
		var text_age = document.getElementsByClassName("text-age")[0].value;
		
		_url += "?advid=" + advid;
		_url += "&realname=" + text_name;
		_url += "&sex=" + (select_sex == "male"? 1 : 2);
		_url += "&email=" + text_email;
		_url += "&mobile=" + text_mobile;
		_url += "&provincename=" + select_province;
		_url += "&cityname=" + select_city;
		
		_url += "&expand1=" + text_age;
		_url += "&expand2=" + select_cartype;
		_url += "&expand3=" + select_whenbuy;
		_url +=	"&expand4=" + select_delear;
		_url +=	"&expand5=" + select_licence;
		
		ajax(_url, function(response){
			if(!!response[0]){
				if(1 === response[0].success){
					alert("恭喜您，提交成功！");
				}
				else{
					alert("提交失败！" + response.info);
				}
			}
		});
	}
	document.getElementsByClassName("div-btn-openanouce")[0].onclick = function(){
		var url= "http://www.bmw.com.cn/cms/cn_mobi/zh/general/legal-notes/personal_data.html";
		window.location.href = url;
	};
	document.getElementsByClassName("div-btn-openanouce2")[0].onclick = function(){
		document.getElementsByClassName("div-anouce-top")[0].style.display = "block";
	};
	document.getElementsByClassName("div-btn-closeanouce")[0].onclick = function(){
		document.getElementsByClassName("div-anouce-top")[0].style.display = "none";
	};
	
	
	document.getElementsByClassName("select-province")[0].onchange = function(){
		if(null == this.value || "" == this.value) return;
		//alert(this.value);
		//清理
		var select_city = document.getElementsByClassName("select-city")[0];
		for(var i = select_city.childNodes.length - 1; i >= 0; i--){
			select_city.removeChild(select_city.childNodes[i]);
		}
		var tmpOption = document.createElement("option");
		tmpOption.innerHTML = "请选择";
		tmpOption.value = "";
		tmpOption.className = "option-notice";
		select_city.appendChild(tmpOption);
		//添加
		for(var i = 0; i < dealers.length; i++){//省
			if(this.value === dealers[i].province ){
				//alert(dealers[i].delears.length);
				for(var j = 0; j < dealers[i].cities.length; j++){//获取某省的所有城市
					var tmpOption = document.createElement("option");
					tmpOption.innerHTML = dealers[i].cities[j].city;
					tmpOption.value = dealers[i].cities[j].city;
					select_city.appendChild(tmpOption);
				}
				break;
			}
		}
	};
	
	document.getElementsByClassName("select-city")[0].onchange = function(){
		if(null == this.value || "" == this.value) return;
		//alert(this.value);
		//清理
		var select_delear = document.getElementsByClassName("select-delear")[0];
		for(var i = select_delear.childNodes.length - 1; i >= 0; i--){
			select_delear.removeChild(select_delear.childNodes[i]);
		}
		var tmpOption = document.createElement("option");
		tmpOption.innerHTML = "请选择";
		tmpOption.value = "";
		tmpOption.className = "option-notice";
		select_delear.appendChild(tmpOption);
		//添加
		var isBreak = false;
		for(var i = 0; i < dealers.length; i++){//省
			for(var j=0; j < dealers[i].cities.length; j++){
				if(this.value === dealers[i].cities[j].city ){
					for(var k = 0; k < dealers[i].cities[j].dealers.length; k++){
						var tmpOption = document.createElement("option");
						tmpOption.innerHTML = dealers[i].cities[j].dealers[k];
						tmpOption.value = dealers[i].cities[j].dealers[k];
						select_delear.appendChild(tmpOption);
					}
					isBreak = true;;
					break;
				}
			}
			if(isBreak){
				break;
			}
		}
	}
	
	window.onload = function(){
		track2(window.codeConsts.channelId, window.codeConsts.codes.page_registration_pv);
	}
</script>
</html>